{
   "apiVersion": "helm.toolkit.fluxcd.io/v2beta1",
   "kind": "HelmRelease",
   "metadata": {
      "name": "vault-config-operator",
      "namespace": "flux-system"
   },
   "spec": {
      "chart": {
         "spec": {
            "chart": "vault-config-operator",
            "interval": "12h",
            "sourceRef": {
               "kind": "HelmRepository",
               "name": "vault-config-operator",
               "namespace": "flux-system"
            },
            "version": "0.8.4"
         }
      },
      "interval": "30m",
      "postRenderers": [
         {
            "kustomize": {
               "patchesJson6902": [
                  {
                     "patch": [
                        {
                           "op": "add",
                           "path": "/spec/template/spec/volumes/-",
                           "value": [
                              {
                                 "name": "vault-tls-certs",
                                 "secret": {
                                    "secretName": "wildcard-tls-secret"
                                 }
                              }
                           ]
                        },
                        {
                           "op": "add",
                           "path": "/spec/template/spec/containers/1/volumeMounts/-",
                           "value": [
                              {
                                 "mountPath": "/vault-tls",
                                 "name": "vault-tls-certs"
                              }
                           ]
                        },
                        {
                           "op": "add",
                           "path": "/spec/template/spec/containers/1/env/-",
                           "value": [
                              {
                                 "name": "VAULT_CACERT",
                                 "value": "/vault-tls/tls.crt"
                              }
                           ]
                        }
                     ],
                     "target": {
                        "kind": "Deployment",
                        "name": "vault-config-operator",
                        "version": "v1"
                     }
                  }
               ]
            }
         }
      ],
      "releaseName": "vault-config-operator",
      "targetNamespace": "vault",
      "values": {
         "env": [
            {
               "name": "VAULT_ADDR",
               "value": "https://vault.test.wirywolf.com"
            }
         ]
      }
   }
}
