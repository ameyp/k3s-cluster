{
   "apiVersion": "kustomize.config.k8s.io/v1beta1",
   "kind": "Kustomization",
   "patches": [
      {
         "patch": "op: \"add\",\npath: \"/spec/template/spec/volumes\",\nvalue: {\n  name: \"vault-tls-certs\",\n  secret: {\n    secretName: vars.cluster.wildcard_cert_secret\n  }\n}\n",
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      },
      {
         "patch": "op: \"add\",\npath: \"/spec/template/spec/containers/1/volumeMounts\",\nvalue: {\n  name: \"vault-tls-certs\",\n  mountPath: \"/vault-tls\",\n}\n",
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      },
      {
         "patch": "op: \"add\",\npath: \"/spec/template/spec/containers/1/env\",\nvalue: {\n  name: \"VAULT_CACERT\",\n  value: \"/vault-tls/tls.crt\",\n}\n",
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      }
   ],
   "resources": [
      "repo.yaml",
      "release.yaml"
   ]
}
