{
   "apiVersion": "kustomize.config.k8s.io/v1beta1",
   "kind": "Kustomization",
   "patches": [
      {
         "patch": {
            "op": "add",
            "path": "/spec/template/spec/volumes",
            "value": {
               "name": "vault-tls-certs",
               "secret": {
                  "secretName": "wildcard-tls-secret"
               }
            }
         },
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      },
      {
         "patch": {
            "op": "add",
            "path": "/spec/template/spec/containers/1/volumeMounts",
            "value": {
               "mountPath": "/vault-tls",
               "name": "vault-tls-certs"
            }
         },
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      },
      {
         "patch": {
            "op": "add",
            "path": "/spec/template/spec/containers/1/env",
            "value": {
               "name": "VAULT_CACERT",
               "value": "/vault-tls/tls.crt"
            }
         },
         "target": {
            "kind": "Deployment",
            "labelSelector": "app.kubernetes.io/name=vault-config-operator"
         }
      }
   ],
   "resources": [
      "repo.yaml",
      "release.yaml"
   ]
}
